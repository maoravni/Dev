/******************************************************************************
*                     (C) LandaLabs 2012                                      *
*******************************************************************************
*
*  PROJECT     :  
*
*  FILE        : 
*   
*  PATH        :  
*
*  PURPOSE     : 
*
*  TOOLCHAIN:  : IAR Embedded Workbench for ARM. Version 6.40.1.3812
*
*  TARGET      :  
*
*
*  DATE        NAME              VER.    COMMENTS
* -----------------------------------------------------------------------------
*  2012.01     Igor Natachanny   1.0.0   Initial version
*
*******************************************************************************
*      Copyright and Proprietary Statment.
* 
*******************************************************************************/
/*============================================================================*/
/*                  * L O C A L   C O N F I G U R A T I O N *                 */
/*============================================================================*/
/*============================================================================*/
/*                                * I M P O R T *                             */
/*============================================================================*/
/* --- GLOBAL_INCLUDE_FILES ------------------------------------------------- */
#include "stm32f2xx.h"
#include "ll_typedef.h"
  #include "free_rtos_exp.h"
  #include "opto_out.h"
/* --- PACKAGE_INCLUDE_FILES ------------------------------------------------ */
#include "..\BSP\dg_in_ctrl.h"
/* --- GLOBAL_EXTERNALS ----------------------------------------------------- */
/* --- PACKAGE_EXTERNALS ---------------------------------------------------- */
  OPTO_OUT_ID_ET GetOptoOutId();
  OPTO_OUT_CTRL_VAL_ET GetOptoOutVal();
/*============================================================================*/
/*                                * E X P O R T *                             */
/*============================================================================*/
/* --- PUBLIC_DATA ---------------------------------------------------------- */
/* --- PUBLIC_FUNCTIONS ----------------------------------------------------- */
/*============================================================================*/
/*                              * L O C A L S *                               */
/*============================================================================*/
/* --- PRIVATE_CONSTANTS ---------------------------------------------------- */
/* --- PRIVATE MACROS ------------------------------------------------------- */
/* --- PRIVATE TYPES -------------------------------------------------------- */
/* --- PRIVATE FUNCTIONS ---------------------------------------------------- */
/* --- PRIVATE_DATA --------------------------------------------------------- */
  extern xSemaphoreHandle dig_in_out_sem;
/*============================================================================*/
/*                  * L O C A L   C O N F I G U R A T I O N *                 */
/*============================================================================*/

/*============================================================================*/
/*     * P U B L I C   F U N C T I O N S   I M P L E M E N T A T I O N *      */
/*============================================================================*/
/*******************************************************************************
  * @brief : BOARD_IDx,NOD_ID_x & all others digital inputs test Task function.       
  * @param   
  * @retval  
*******************************************************************************/
  void dig_input_test( void* pvParameters )
  {
   uint32_t node_id = 0;
   uint32_t board_id = 0;
   signed portBASE_TYPE      res;
   uint8_t    dig_in_val;
   uint8_t    dig_out_val;
 

   
    while (1){
      node_id = nod_id_get();
      board_id = board_id_get();
        
//      res = xSemaphoreTake(dig_in_out_sem, portMAX_DELAY);
//      dig_in_get(DIG_IN_ID_ET dig_in, uint8_t *res_ptr);
//      out_id = GetOptoOutId();
//      val = GetOptoOutVal();
      
      for(int dig_in = DIG_IN_1; dig_in < NUMBER_OF_DG_INs; dig_in++){ 
        dig_in_get(dig_in, &dig_in_val);
  //      dig_out_val = get_dig_out_val(OPTO_OUT_ID_ET id);
//         if(dig_in_val == val)
//            M_LOGGER_LOGF_UNSORTED (M_LOGGER_LEVEL_TRACE, "DIG_OUT_%d <=> DIG_IN_%d",out_id, dig_in,0,0,0,0,0);
      }/* for */
    }    
  }/*********************** dig_input_test ************************************/
/*============================================================================*/
/*     * P R I V A T E   F U N C T I O N S   I M P L E M E N T A T I O N *    */
/*============================================================================*/
/*============================================================================*/
/*                     (C) Copyright LandaLabs 2012                           */
/*=========================================================== end_of_file ====*/
/**
  * @brief: 
  *
  * @param:      
  *
  * @retval: 
**/